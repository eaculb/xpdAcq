

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick start &mdash; xpdAcq 0.5 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="xpdAcq 0.5 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xpdAcq
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="xpdusers.html">For XPD Users</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">For Beamline Staff</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_note.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpdAcq</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart_old.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<span id="qs"></span><h1>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<div class="section" id="checklist">
<h2>Checklist<a class="headerlink" href="#checklist" title="Permalink to this headline">¶</a></h2>
<p>The instrument scientist (IS) should have set up your beamtime hardware and software
for you.  Let’s check if it is the case.</p>
<ol class="arabic simple">
<li>Activate the XPD data acquisition environment:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>In a terminal look to see if it is already activated.  If it is, you should see <code class="docutils literal"><span class="pre">(collection)</span></code> at the beginning of the line.</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>(collection)xf28id1@xf28id1-ws2:~$
</pre></div>
</div>
<ul class="simple">
<li>If you don’t see it, type <code class="docutils literal"><span class="pre">icollection</span></code> at the command prompt then check again.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>OK, you are in.  Make sure that that the instrument scientist has initiated your beamtime. type <code class="docutils literal"><span class="pre">bt.md</span></code> and hit return. You should see the beamtime (<code class="docutils literal"><span class="pre">bt</span></code>) metadata (<code class="docutils literal"><span class="pre">md</span></code>) that has been pre-stored by the IS, and it should contain things like the last name of the PI on the proposal and the SAF number for the beamtime.  If not, please seek out the IS to get your session initialized.</li>
</ol>
<p>3. Check that the wavelength has been set.  Does the correct x-ray wavelength appear in <code class="docutils literal"><span class="pre">bt.md</span></code> <code class="docutils literal"><span class="pre">['bt_wavelength']</span></code> field, or does it say <code class="docutils literal"><span class="pre">None</span></code>.  If the latter, you can still collect scans but automated data reduction may not work, so best to grab the IS again.
5. Check that the Perkin Elmer detector is correctly set up.</p>
<blockquote>
<div><ul class="simple">
<li>Look at the Perkin Elmer screen on the CSS and make sure that <code class="docutils literal"><span class="pre">Acquire</span></code> mode has been enabled. If Acquire mode is enabled, it should show system information <code class="docutils literal"><span class="pre">Collecting</span></code> in yellow color. If it hasn’t been activated, please click ‘start’ button.</li>
</ul>
<a class="reference internal image-reference" href="_images/cropped_pe1c_ioc.png"><img alt="_images/cropped_pe1c_ioc.png" class="align-center" src="_images/cropped_pe1c_ioc.png" style="width: 300px; height: 200px;" /></a>
<ul class="simple">
<li>Type <code class="docutils literal"><span class="pre">glbl.area_det</span></code> and return.  It should return:</li>
</ul>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">glbl</span><span class="o">.</span><span class="n">area_det</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">PerkinElmerContinuous</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;XF:28IDC-ES:1{Det:PE1}&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pe1&#39;</span><span class="p">,</span> <span class="n">read_attrs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tiff&#39;</span><span class="p">,</span> <span class="s1">&#39;stats1&#39;</span><span class="p">],</span> <span class="n">configuration_attrs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;images_per_set&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_sets&#39;</span><span class="p">],</span> <span class="n">monitor_attrs</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>There are other setups that you can do to make your experiment run smoothly.  For example, by carrying out a calibration before you start collecting it greatly facilitate data reduction later.  Please talk to the IS if you don’t know how to do this.</p>
<p>But you seem to be set up ok, so let’s go and collect some data.</p>
</div>
<div class="section" id="collecting-data-quickstart">
<h2>Collecting Data Quickstart<a class="headerlink" href="#collecting-data-quickstart" title="Permalink to this headline">¶</a></h2>
<p>The basic way to collect data is to carry out a “scan”, by typing the kind of scan and giving it as arguments a <code class="docutils literal"><span class="pre">sample-object</span></code> and a <code class="docutils literal"><span class="pre">scanplan-object</span></code>.  These objects just contain information that will either be used to run the scan, and/or just saved as metadata with the data, allowing you to find the data later and process it. You will make your own objects later, but for now you can do a quick scan just to collect some data with some predefined objects.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type <code class="docutils literal"><span class="pre">bt.list()</span></code> and return.  You should see a list of already defined objects and their index, or the number they sit in the list.</li>
<li>To run a scan you type <code class="docutils literal"><span class="pre">&lt;scan-name&gt;(&lt;sample-object&gt;,&lt;scanplan-object&gt;)</span></code>:</li>
</ol>
<blockquote>
<div><p>Replace those words in angle brackets with pointers to real objects, eg.:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">xrun(bt.get(2),bt.get(5))</span></code> will do a scan on the dummy sample (<code class="docutils literal"><span class="pre">'sa'</span></code>) called <code class="docutils literal"><span class="pre">'l-user'</span></code>–(for lazy user!) which is in position (index) <code class="docutils literal"><span class="pre">2</span></code> in the <code class="docutils literal"><span class="pre">bt.list()</span></code> list–for 1 second (the name of that object in the list at position <code class="docutils literal"><span class="pre">5</span></code> is <code class="docutils literal"><span class="pre">'ct1s'</span></code> which stands for “count 1 second”).</li>
<li><code class="docutils literal"><span class="pre">xrun(bt.get(2),bt.get(7))</span></code> will do a scan for 10 s on the same sample (to see that, look at the list produced by typing <code class="docutils literal"><span class="pre">bt.list()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">setupscan(bt.get(2),bt.get(7))</span></code> will do a setupscan on that sample for 10 seconds.  A setupscan is like a xrun (“production run”) except it is tagged in metadata as a setupscan so you can separate later which were production runs and which were setup-scans.</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Pro</span><span class="o">-</span><span class="n">Tip</span><span class="p">:</span>
<span class="sd">&#39;&#39;&#39;``xrun`` and all the scans support different ways of assigning acquire objects.</span>
<span class="sd">You can either get the objects with the ``bt.get()`` methods as above, or</span>
<span class="sd">to save typing, the scan functions allow you to specify just the object index,</span>
<span class="sd">or (unique) name of the acquire object. The following expressions are all</span>
<span class="sd">equivalent:&#39;&#39;&#39;</span>

<span class="n">xrun</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="n">xrun</span><span class="p">(</span><span class="s1">&#39;l-user&#39;</span><span class="p">,</span> <span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># where &#39;l-user&#39; is the name of bt Sample object at index 2</span>
<span class="n">xrun</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;ct_1&#39;</span><span class="p">)</span>    <span class="c1"># where &#39;ct_1&#39; is the name of bt ScanPlan object at index 5</span>
<span class="n">xrun</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">xrun</span><span class="p">(</span><span class="s1">&#39;l-user&#39;</span><span class="p">,</span><span class="s1">&#39;ct_1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>to see the data you have to extract it from the NSLS-ii database.</li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li>Type <code class="docutils literal"><span class="pre">save_last_tiff()</span></code> to get the most recent scan you ran.  A dark-subtracted tiff file will appear in the directory <code class="docutils literal"><span class="pre">~/xpdUser/tiff_base</span></code> with prefix <code class="docutils literal"><span class="pre">sub_</span></code> in file name.</li>
<li><code class="docutils literal"><span class="pre">save_tiff(db[-2])</span></code> gets you the second to last scan that was collected, <code class="docutils literal"><span class="pre">save_tiff(db[-10:])</span></code> gets you the last 10 scans, (the syntax is Pythonic but it means “the items in the list from 10 ago up to the end of the list, i.e., now”.  You can do all kinds of slicing and dicing, for example <code class="docutils literal"><span class="pre">db[-10:-8,-2]</span></code> would return the scans that were tenth, ninth and eighth ago, and also the last but one.) and so on.</li>
<li>The tiff file appears in the directory <code class="docutils literal"><span class="pre">~/xpdUser/tiff_base</span></code> with a reasonably recognizable automatically generated name and you can do pretty much what you like with it. For example, copy it to an external drive.  However, there are handy tools on the XPD computer for analyzing your data.  As long as you save all your work in the <code class="docutils literal"><span class="pre">xpdUser</span></code> directory tree (make as many directories as you like under there) your work will be archived in a remote location at the end of your beamtime, and then completely deleted from the local XPD computer so that the next user has their own fresh environment to work in, but your work is safe.</li>
<li>To use data analysis tools on the XPD computer, <strong>in a new terminal window</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Type <code class="docutils literal"><span class="pre">getxgui</span></code></li>
<li>proceed to <span class="xref std std-ref">xPDFsuite_manual</span></li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="remember">
<h2>Remember!<a class="headerlink" href="#remember" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">bt.list()</span></code> to see what objects are available</li>
<li><code class="docutils literal"><span class="pre">setupscan(&lt;index-of-Sample-object&gt;,&lt;index-of-ScanPlan-object&gt;)</span></code>  to run setup scans until you are ready for production runs, then</li>
<li><code class="docutils literal"><span class="pre">xrun(&lt;index-of-Sample-object&gt;),&lt;index-of-ScanPlan-object&gt;)</span></code></li>
<li><code class="docutils literal"><span class="pre">save_tiff(db[list_of_scans])</span></code> to get the data back as a tiff file</li>
<li><code class="docutils literal"><span class="pre">xpdfsuite</span></code> (xPDFsuite) to visualize it, integrate it to 1D and process to get a diffraction pattern or PDF.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>So you have collected some data, and looked at it.  It is probably time to set up some more extensive data-objects so that you will be able to search easily for your data later and do more sophisticated scans.
Please take the time to read the full documentation from <strong>XPD user</strong> section to get the most out of your data.  But for now, here is a quick summary.</p>
<dl class="docutils">
<dt>You should try and set up some of your own scanplan objects:</dt>
<dd><ul class="first last">
<li><p class="first">let’s say you want to do a count scan for 1.5 minutes.</p>
<ol class="arabic simple">
<li>type <code class="docutils literal"><span class="pre">bt.list('sp')</span></code>  to see the current list of scanplan objects</li>
<li>make a new <code class="docutils literal"><span class="pre">scanPlan</span></code> object by typing</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_90&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create a <code class="docutils literal"><span class="pre">'ct'</span></code>, or count-type, scan with an exposure of 90 s or 1.5 minutes.
To find more details on creating new <code class="docutils literal"><span class="pre">ScanPlan</span></code> objects, please see <a class="reference internal" href="usb_Scan.html#usb-scan"><span class="std std-ref">ScanPlan objects</span></a></p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>type <code class="docutils literal"><span class="pre">bt.list('sp')</span></code> again.  You should see your new <code class="docutils literal"><span class="pre">ScanPlan</span></code> object at the end of the list.  You can now use your object to collect data by passing it to a “scan” function:</li>
<li>You can run it using <code class="docutils literal"><span class="pre">xrun(&lt;sample-object&gt;,&lt;index-of-your-new-ScanPlan-Object&gt;)</span></code>  If your new object is at position 11 in the list, and position 2 holds a <code class="docutils literal"><span class="pre">Sample</span></code> object (it does by default) then <code class="docutils literal"><span class="pre">xrun(2,11)</span></code>, or probably better, <code class="docutils literal"><span class="pre">setupscan(2,11)</span></code> since we are still messing around here.</li>
</ol>
</li>
</ul>
</dd>
<dt>Types of scan available.</dt>
<dd><p class="first">They all take as arguments <code class="docutils literal"><span class="pre">(&lt;sample-object&gt;,</span> <span class="pre">&lt;scanplan-object&gt;)</span></code> in that order:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">xrun()</span></code> - the one you will use the most.  It stands for “production run”</li>
<li><code class="docutils literal"><span class="pre">setupscan()</span></code> - it is just the same as <code class="docutils literal"><span class="pre">xrun()</span></code> but the data are tagged as being test/setup data, helping you to keep track of what is what later.</li>
<li><code class="docutils literal"><span class="pre">dryrun()</span></code> - it doesn’t execute anything, only prints out metadata, so you can test out your scan to see what it will do.</li>
<li><code class="docutils literal"><span class="pre">background()</span></code> - Like <code class="docutils literal"><span class="pre">xrun()</span></code> but it tags the dataset as a background scan, so later you can search for all your background scans!</li>
</ol>
<p>these ones you will use less often, if at all</p>
<ol class="last arabic simple" start="5">
<li><code class="docutils literal"><span class="pre">calibration()</span></code> - the same as <code class="docutils literal"><span class="pre">xrun()</span></code> , but the data are tagged as calibration data.</li>
<li><code class="docutils literal"><span class="pre">dark()</span></code> - you shouldn’t have to use this as dark scans (shutter closed) and dark subtractions of your data are done automatically, but it is here in case you do it is there.  It ensure the shutter is closed and tags the scan as being a dark.</li>
<li><code class="docutils literal"><span class="pre">run_mask_builder()</span></code> - take data and produce a mask for the image, the mask is then inserted into the metadata</li>
</ol>
</dd>
<dt>Types of ScanPlan objects available:</dt>
<dd><ul class="first simple">
<li><code class="docutils literal"><span class="pre">'ct'</span></code> just exposes the the detector for a number of seconds. e.g.,  <code class="docutils literal"><span class="pre">ScanPlan('ct17.5s','ct',{'exposure':17.5})</span></code>, or <code class="docutils literal"><span class="pre">ScanPlan('ct_17.5')</span></code> for short, is a scan plan that just exposes the detector for 17.5 seconds.</li>
<li><code class="docutils literal"><span class="pre">'tseries'</span></code> executes a series of <code class="docutils literal"><span class="pre">'num'</span></code> exposures, each of exposure time <code class="docutils literal"><span class="pre">'exposure'</span></code> seconds with  a delay of <code class="docutils literal"><span class="pre">'delay'</span></code> seconds between them.  e.g., <code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50','tseries',{'num':50,'exposure':1,'delay':59})</span></code>, or <code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50')</span></code> for short, will measure 50 scans of 1 second with a delay of 59 seconds in between each of them.</li>
<li><code class="docutils literal"><span class="pre">'Tramp'</span></code> executes a temperature ramp from <code class="docutils literal"><span class="pre">'startingT'</span></code> to <code class="docutils literal"><span class="pre">'endingT'</span></code> in temperature steps of <code class="docutils literal"><span class="pre">'Tstep'</span></code> with exposure time of <code class="docutils literal"><span class="pre">'exposure'</span></code>.  e.g., <code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5','Tramp',{'startingT':200,</span> <span class="pre">'endingT':500,</span> <span class="pre">'Tstep':5,</span> <span class="pre">'exposure':1})</span></code>, or <code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5')</span></code> for short, will automatically change the temperature, starting at 200 K and ending at 500 K, measuring a scan of 1 s at every 5 K step. The temperature controller will hold at each temperature until the temperature stabilizes before starting the measurement.</li>
</ul>
<p class="last">in the shortened “auto-naming” syntax, the logic is that the first number is always the exposure time.  Later numbers depend on the type of the <code class="docutils literal"><span class="pre">ScanPlan</span></code> type.  Remember, you can always give your object to <code class="docutils literal"><span class="pre">dryrun()</span></code> and it will tell you what Frankenstein you created without executing anything.</p>
</dd>
<dt>Types of Sample objects available:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">Sample</span></code> - there is only one type of Sample “object”, but you will create as many copies of it as you have samples, each with a unique sample name that helps you remember what the sample is.  It is a container for all the metadata about your sample, and moving forward, the metadata may be used for automated data reduction and modeling.</li>
</ul>
</dd>
</dl>
<p>Here is a summary table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="69%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Scan Type</th>
<th class="head">Syntax</th>
<th class="head">Short Form</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>overview</td>
<td><code class="docutils literal"><span class="pre">ScanPlan('&lt;name&gt;','&lt;scan-type&gt;',{&lt;dictionary-of-scan-attributes&gt;})</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('&lt;name-in-std-form&gt;')</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ct</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('ct_17.5','ct',{'exposure':17.5})</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('ct_17.5')</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">tseries</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50','tseries',{'num':50,'exposure':1,'delay':59})</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50')</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Tramp</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5','Tramp',{'startingT':200,</span> <span class="pre">'endingT':500,</span> <span class="pre">'Tstep':5,</span> <span class="pre">'exposure':1})</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5')</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="abort">
<h2>Abort!<a class="headerlink" href="#abort" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Oops, you requested a scan with the wrong <code class="docutils literal"><span class="pre">Sample</span></code>, or <code class="docutils literal"><span class="pre">ScanPlan</span></code> object, or your <code class="docutils literal"><span class="pre">ScanPlan</span></code> object is not doing what you expected!!!!!</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CTL</span><span class="o">-</span><span class="n">C</span>
</pre></div>
</div>
</div></blockquote>
<p>will interrupt your scan and allow you to choose whether to abort it, or restart it.</p>
<p>If you abort it the system is reset to where it was before the scan started.</p>
</div></blockquote>
<dl class="docutils">
<dt>Experiment and sample objects:</dt>
<dd><p class="first">1. It is time well spent to set up all your experiment and sample objects accurately.
To set up a sample you have to give it an experiment object, so <code class="docutils literal"><span class="pre">Sample('Li</span> <span class="pre">battery</span> <span class="pre">electrode',bt.get(96))</span></code> uses the object in <code class="docutils literal"><span class="pre">bt.list(96)</span></code> which must be an <code class="docutils literal"><span class="pre">ex</span></code> type object, for example I #may have made# it with <code class="docutils literal"><span class="pre">Experiment('cycled</span> <span class="pre">and</span> <span class="pre">uncycled</span> <span class="pre">batteries',bt)</span></code>.
The <code class="docutils literal"><span class="pre">bt</span></code> is the beamtime object. For complete documentation, please see <a class="reference internal" href="usb_Experiment.html#usb-experiment"><span class="std std-ref">Setting up your XPD acuisition objects</span></a></p>
<p class="last">2. It is also possible to download xpdAcq <a class="reference external" href="https://github.com/xpdAcq/xpdAcq">from here</a> and run it on your own computer to set up the <code class="docutils literal"><span class="pre">sample</span></code> and <code class="docutils literal"><span class="pre">scanplan</span></code> objects you think you will need at the beamtime.
So when you are at XPD you can concentrate on collecting data and not typing metadata.
Simulation at home is strongly recommended. See the full documentation for more details here [FIXME doc needed]</p>
</dd>
</dl>
</div>
<div class="section" id="user-scripts">
<h2>User scripts<a class="headerlink" href="#user-scripts" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Your <code class="docutils literal"><span class="pre">scanplan</span></code> objects can be sequenced into scripts, executing one after the other as you desire.  To set this up, write a sequence of commands into a text file, save it with the extension <code class="docutils literal"><span class="pre">.py</span></code> in the <code class="docutils literal"><span class="pre">userScripts</span></code> directory with a memorable name, like <code class="docutils literal"><span class="pre">myNightShiftScript.py</span></code>.  Double and triple check your script, then when you are ready to execute it, in <code class="docutils literal"><span class="pre">ipython</span></code> session type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="o">-</span><span class="n">i</span> <span class="o">~/</span><span class="n">xpdUser</span><span class="o">/</span><span class="n">userScripts</span><span class="o">/</span><span class="n">myNightShiftScript</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Stay there for a while to make sure everything is running as expected and then go to bed!</p>
</div></blockquote>
<p>There is much more to the <code class="docutils literal"><span class="pre">xpdAcq</span></code> software that will give you superpowers in rapid and flexible data collection, data retrieval and processing.
This was just the quick start, but much more information is in the full documentation in the <strong>XPD user</strong> section of the documentation</p>
</div>
<div class="section" id="global-options">
<h2>Global options<a class="headerlink" href="#global-options" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">glbl</span></code> class has several attributes that control the overall behavior of <code class="docutils literal"><span class="pre">xpdacq</span></code> software.</p>
<div class="section" id="possible-scenarios">
<h3>Possible scenarios<a class="headerlink" href="#possible-scenarios" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><strong>No automated dark collection logic at all:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="o">.</span><span class="n">auto_dark</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">glbl</span><span class="o">.</span><span class="n">shutter_control</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
<p><strong>Want a fresh dark frame every time ``xrun`` is triggered:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="o">.</span><span class="n">dk_window</span> <span class="o">=</span> <span class="mf">0.001</span> <span class="c1"># dark window is 0.001 min = 0.06 secs</span>
</pre></div>
</div>
<p><strong>Want a 0.2 exposure time per frame instead of 0.1s:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="o">.</span><span class="n">frame_acq_time</span> <span class="o">=</span> <span class="mf">0.2</span>
</pre></div>
</div>
<p><strong>Want to run temperature ramp with different device and use alternative shutter:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="o">.</span><span class="n">temp_controller</span> <span class="o">=</span> <span class="n">eurotherm</span>
<span class="n">glbl</span><span class="o">.</span><span class="n">shutter</span> <span class="o">=</span> <span class="n">shctl2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">desired objects should be properly <em>configured</em>. For more details, please contact beamline staff.</p>
</div>
</div></blockquote>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright (c) 2016 trustees of Columbia University in the City of New York.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>